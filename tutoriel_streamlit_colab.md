# Tutoriel : Trois Applications Streamlit pour Google Colab

Ce tutoriel explique comment construire et ex√©cuter trois mini-applications Streamlit directement dans Google Colab, sans avoir besoin d'un environnement de d√©veloppement local.

## üöÄ Configuration Initiale dans Google Colab

### Cellule 1 : Installation des D√©pendances

```python
# Installation des packages n√©cessaires
!pip install streamlit pyngrok pandas matplotlib seaborn plotly

# Import des modules
import streamlit as st
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns
import plotly.express as px
from datetime import datetime
import random
import subprocess
import threading
import time
from pyngrok import ngrok
```

### Cellule 2 : Configuration de l'Authentification ngrok

```python
# Configuration de ngrok (remplacez par votre token)
# Obtenez un token gratuit sur https://ngrok.com/
ngrok.set_auth_token("VOTRE_TOKEN_NGROK_ICI")  # Remplacez par votre token
```

## üìù Application 1 : Formulaire d'Achat de V√©hicule

### Cellule 3 : Code du Formulaire

```python
%%writefile app_vehicle_form.py
import streamlit as st
import pandas as pd
from datetime import datetime

def init_vehicle_data():
    """Initialise les donn√©es de v√©hicules dans la session."""
    if "vehicle_data" not in st.session_state:
        st.session_state["vehicle_data"] = pd.DataFrame(columns=[
            "Nom", "Contact", "Type", "Prix", "Mode_Paiement", "Date_Achat"
        ])

def main():
    st.set_page_config(
        page_title="Formulaire V√©hicule",
        page_icon="üöó",
        layout="wide"
    )
    
    st.title("üöó Formulaire d'Achat de V√©hicule")
    st.markdown("---")
    
    init_vehicle_data()
    
    # Cr√©ation du formulaire
    with st.form(key="vehicle_form", clear_on_submit=True):
        st.subheader("Informations d'Achat")
        
        col1, col2 = st.columns(2)
        
        with col1:
            nom = st.text_input("Nom complet *", placeholder="Ex: Jean Dupont")
            contact = st.text_input("Contact *", placeholder="Email ou t√©l√©phone")
            
        with col2:
            type_vehicule = st.selectbox(
                "Type de v√©hicule *",
                ["Voiture", "Moto", "Camion", "SUV", "Autre"]
            )
            prix = st.number_input(
                "Prix (‚Ç¨) *", 
                min_value=0.0, 
                step=100.0,
                format="%.2f"
            )
        
        mode_paiement = st.selectbox(
            "Mode de paiement *",
            ["Comptant", "Cr√©dit", "Leasing", "Autre"]
        )
        
        date_achat = st.date_input(
            "Date d'achat *",
            value=datetime.now().date()
        )
        
        # Bouton de soumission
        submitted = st.form_submit_button("üíæ Enregistrer l'Achat", type="primary")
        
        if submitted:
            # Validation des champs obligatoires
            if not nom or not contact or prix <= 0:
                st.error("‚ö†Ô∏è Veuillez remplir tous les champs obligatoires (*)")
            else:
                # Ajout des donn√©es
                nouvelle_ligne = pd.DataFrame({
                    "Nom": [nom],
                    "Contact": [contact],
                    "Type": [type_vehicule],
                    "Prix": [prix],
                    "Mode_Paiement": [mode_paiement],
                    "Date_Achat": [date_achat]
                })
                
                st.session_state["vehicle_data"] = pd.concat([
                    st.session_state["vehicle_data"], 
                    nouvelle_ligne
                ], ignore_index=True)
                
                st.success(f"‚úÖ Achat de {nom} enregistr√© avec succ√®s !")
    
    # Affichage de l'historique
    st.markdown("---")
    st.subheader("üìä Historique des Achats")
    
    if not st.session_state["vehicle_data"].empty:
        st.dataframe(
            st.session_state["vehicle_data"],
            use_container_width=True,
            hide_index=True
        )
        st.info(f"üìà Total : {len(st.session_state['vehicle_data'])} achat(s) enregistr√©(s)")
    else:
        st.info("üîç Aucun achat enregistr√© pour le moment.")

if __name__ == "__main__":
    main()
```

### Cellule 4 : Lancement du Formulaire

```python
# Fonction pour lancer Streamlit en arri√®re-plan
def run_streamlit_form():
    subprocess.run(["streamlit", "run", "app_vehicle_form.py", "--server.port", "8501", "--server.headless", "true"])

# Arr√™ter les processus existants
!pkill -f streamlit

# Lancer l'application en arri√®re-plan
thread = threading.Thread(target=run_streamlit_form)
thread.daemon = True
thread.start()

# Attendre que le serveur d√©marre
time.sleep(10)

# Cr√©er le tunnel public
public_url = ngrok.connect(8501)
print(f"üåê Application Formulaire accessible √† : {public_url}")
```

## ü§ñ Application 2 : Chatbot Simple

### Cellule 5 : Code du Chatbot

```python
%%writefile app_chatbot.py
import streamlit as st
import random
from datetime import datetime

def init_chat_history():
    """Initialise l'historique du chat."""
    if "messages" not in st.session_state:
        st.session_state["messages"] = [
            {
                "role": "assistant",
                "content": "üëã Bonjour ! Je suis votre assistant virtuel. Comment puis-je vous aider aujourd'hui ?",
                "timestamp": datetime.now()
            }
        ]

def get_bot_response(user_message):
    """G√©n√®re une r√©ponse bas√©e sur le message utilisateur."""
    message_lower = user_message.lower()
    
    # R√©ponses contextuelles
    responses = {
        "bonjour": [
            "Bonjour ! Comment allez-vous ?",
            "Salut ! Que puis-je faire pour vous ?",
            "Hello ! Ravi de vous parler !"
        ],
        "voiture": [
            "üöó Les voitures sont fascinantes ! Quel type vous int√©resse ?",
            "üîß Avez-vous des questions sur l'entretien automobile ?",
            "üöô √âlectrique, essence ou hybride ?"
        ],
        "prix": [
            "üí∞ Les prix varient selon le mod√®le et l'ann√©e.",
            "üíµ Quel est votre budget approximatif ?",
            "üìä Souhaitez-vous comparer des prix ?"
        ],
        "aide": [
            "ü§ù Je suis l√† pour vous aider ! Posez-moi vos questions.",
            "üìû N'h√©sitez pas √† me demander ce dont vous avez besoin.",
            "üí° Je peux vous renseigner sur les v√©hicules et leurs caract√©ristiques."
        ],
        "merci": [
            "De rien ! üòä",
            "Avec plaisir !",
            "C'est un plaisir de vous aider !"
        ]
    }
    
    # Recherche de mots-cl√©s
    for keyword, possible_responses in responses.items():
        if keyword in message_lower:
            return random.choice(possible_responses)
    
    # R√©ponse par d√©faut
    default_responses = [
        "ü§î Int√©ressant ! Pouvez-vous me donner plus de d√©tails ?",
        "üìù Je prends note. Que souhaitez-vous savoir d'autre ?",
        "üí≠ C'est une bonne question ! Laissez-moi y r√©fl√©chir...",
        "üéØ Je comprends votre point de vue. Comment puis-je vous aider davantage ?"
    ]
    
    return random.choice(default_responses)

def main():
    st.set_page_config(
        page_title="Chatbot Assistant",
        page_icon="ü§ñ",
        layout="wide"
    )
    
    st.title("ü§ñ Assistant Virtuel")
    st.markdown("*Votre compagnon conversationnel intelligent*")
    st.markdown("---")
    
    init_chat_history()
    
    # Affichage de l'historique des messages
    chat_container = st.container()
    
    with chat_container:
        for message in st.session_state["messages"]:
            with st.chat_message(message["role"]):
                st.write(message["content"])
                if "timestamp" in message:
                    st.caption(f"üìÖ {message['timestamp'].strftime('%H:%M:%S')}")
    
    # Interface de saisie
    if prompt := st.chat_input("üí¨ Tapez votre message ici..."):
        # Ajout du message utilisateur
        user_message = {
            "role": "user",
            "content": prompt,
            "timestamp": datetime.now()
        }
        st.session_state["messages"].append(user_message)
        
        # Affichage du message utilisateur
        with st.chat_message("user"):
            st.write(prompt)
            st.caption(f"üìÖ {user_message['timestamp'].strftime('%H:%M:%S')}")
        
        # G√©n√©ration et affichage de la r√©ponse
        bot_response = get_bot_response(prompt)
        assistant_message = {
            "role": "assistant",
            "content": bot_response,
            "timestamp": datetime.now()
        }
        st.session_state["messages"].append(assistant_message)
        
        with st.chat_message("assistant"):
            st.write(bot_response)
            st.caption(f"üìÖ {assistant_message['timestamp'].strftime('%H:%M:%S')}")
    
    # Sidebar avec options
    with st.sidebar:
        st.header("üõ†Ô∏è Options")
        
        if st.button("üóëÔ∏è Effacer l'historique", type="secondary"):
            st.session_state["messages"] = []
            init_chat_history()
            st.rerun()
        
        st.markdown("---")
        st.subheader("üìä Statistiques")
        nb_messages = len(st.session_state["messages"])
        st.metric("Messages √©chang√©s", nb_messages)

if __name__ == "__main__":
    main()
```

### Cellule 6 : Lancement du Chatbot

```python
# Arr√™ter les processus pr√©c√©dents
!pkill -f streamlit
time.sleep(3)

# Fonction pour lancer le chatbot
def run_streamlit_chat():
    subprocess.run(["streamlit", "run", "app_chatbot.py", "--server.port", "8502", "--server.headless", "true"])

# Lancer l'application
thread = threading.Thread(target=run_streamlit_chat)
thread.daemon = True
thread.start()

# Attendre que le serveur d√©marre
time.sleep(10)

# Cr√©er le tunnel public
public_url = ngrok.connect(8502)
print(f"ü§ñ Application Chatbot accessible √† : {public_url}")
```

## üìä Application 3 : Visualisation des Achats

### Cellule 7 : Code de Visualisation

```python
%%writefile app_data_visualization.py
import streamlit as st
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns
import plotly.express as px
import plotly.graph_objects as go

def load_vehicle_data():
    """Charge les donn√©es de v√©hicules depuis la session."""
    if "vehicle_data" not in st.session_state:
        # Cr√©er des donn√©es d'exemple pour la d√©monstration
        sample_data = pd.DataFrame({
            "Nom": ["Jean Dupont", "Marie Martin", "Pierre Durand", "Sophie Leblanc", "Paul Rousseau"],
            "Contact": ["jean@email.com", "marie@email.com", "pierre@email.com", "sophie@email.com", "paul@email.com"],
            "Type": ["Voiture", "SUV", "Moto", "Voiture", "Camion"],
            "Prix": [25000, 45000, 8000, 30000, 55000],
            "Mode_Paiement": ["Cr√©dit", "Comptant", "Comptant", "Cr√©dit", "Leasing"],
            "Date_Achat": pd.to_datetime(["2024-01-15", "2024-02-20", "2024-03-10", "2024-04-05", "2024-05-12"])
        })
        st.session_state["vehicle_data"] = sample_data
    
    return st.session_state["vehicle_data"]

def create_summary_stats(df):
    """Cr√©e des statistiques r√©sum√©es."""
    if df.empty:
        return None
    
    stats = {
        "Total des achats": len(df),
        "Prix moyen": f"{df['Prix'].mean():.2f} ‚Ç¨",
        "Prix m√©dian": f"{df['Prix'].median():.2f} ‚Ç¨",
        "Prix total": f"{df['Prix'].sum():.2f} ‚Ç¨",
        "Type le plus populaire": df['Type'].mode().iloc[0] if not df['Type'].mode().empty else "N/A"
    }
    return stats

def main():
    st.set_page_config(
        page_title="Visualisation des Achats",
        page_icon="üìä",
        layout="wide"
    )
    
    st.title("üìä Visualisation des Achats de V√©hicules")
    st.markdown("*Analyse et visualisation des donn√©es d'achat*")
    st.markdown("---")
    
    # Chargement des donn√©es
    df = load_vehicle_data()
    
    if df.empty:
        st.warning("‚ö†Ô∏è Aucune donn√©e disponible.")
        st.info("üí° Utilisez d'abord l'application de formulaire pour enregistrer des achats.")
        st.stop()
    
    # Sidebar pour les filtres
    st.sidebar.header("üîß Filtres")
    
    # Filtre par type de v√©hicule
    types_disponibles = df['Type'].unique().tolist()
    types_selectionnes = st.sidebar.multiselect(
        "S√©lectionner les types de v√©hicules",
        options=types_disponibles,
        default=types_disponibles,
        help="Choisissez un ou plusieurs types pour filtrer les donn√©es"
    )
    
    # Filtre par gamme de prix
    if not df['Prix'].empty:
        prix_min, prix_max = st.sidebar.slider(
            "Gamme de prix (‚Ç¨)",
            min_value=float(df['Prix'].min()),
            max_value=float(df['Prix'].max()),
            value=(float(df['Prix'].min()), float(df['Prix'].max())),
            step=100.0
        )
    else:
        prix_min, prix_max = 0.0, 100000.0
    
    # Application des filtres
    df_filtre = df[
        (df['Type'].isin(types_selectionnes)) &
        (df['Prix'] >= prix_min) &
        (df['Prix'] <= prix_max)
    ]
    
    # Affichage des statistiques
    st.subheader("üìà Statistiques G√©n√©rales")
    stats = create_summary_stats(df_filtre)
    
    if stats:
        col1, col2, col3, col4, col5 = st.columns(5)
        
        with col1:
            st.metric("Total achats", stats["Total des achats"])
        with col2:
            st.metric("Prix moyen", stats["Prix moyen"])
        with col3:
            st.metric("Prix m√©dian", stats["Prix m√©dian"])
        with col4:
            st.metric("Prix total", stats["Prix total"])
        with col5:
            st.metric("Type populaire", stats["Type le plus populaire"])
    
    st.markdown("---")
    
    # Tableau des donn√©es filtr√©es
    st.subheader("üìã Donn√©es Filtr√©es")
    if not df_filtre.empty:
        st.dataframe(
            df_filtre,
            use_container_width=True,
            hide_index=True
        )
    else:
        st.info("üîç Aucune donn√©e ne correspond aux filtres s√©lectionn√©s.")
    
    st.markdown("---")
    
    # Visualisations
    if not df_filtre.empty:
        st.subheader("üìä Visualisations")
        
        # Ligne 1 : Graphiques en barres
        col1, col2 = st.columns(2)
        
        with col1:
            st.write("**Nombre d'achats par type**")
            type_counts = df_filtre['Type'].value_counts()
            fig1 = px.bar(
                x=type_counts.index, 
                y=type_counts.values,
                labels={'x': 'Type de v√©hicule', 'y': 'Nombre d\'achats'},
                title="Distribution par type"
            )
            st.plotly_chart(fig1, use_container_width=True)
        
        with col2:
            st.write("**Prix moyen par type**")
            prix_moyen = df_filtre.groupby('Type')['Prix'].mean()
            fig2 = px.bar(
                x=prix_moyen.index,
                y=prix_moyen.values,
                labels={'x': 'Type de v√©hicule', 'y': 'Prix moyen (‚Ç¨)'},
                title="Prix moyen par type"
            )
            st.plotly_chart(fig2, use_container_width=True)
        
        # Ligne 2 : Graphiques avanc√©s
        col3, col4 = st.columns(2)
        
        with col3:
            st.write("**Distribution des prix**")
            fig3 = px.histogram(
                df_filtre, 
                x='Prix', 
                nbins=10,
                title="Distribution des prix",
                labels={'Prix': 'Prix (‚Ç¨)', 'count': 'Fr√©quence'}
            )
            st.plotly_chart(fig3, use_container_width=True)
        
        with col4:
            st.write("**R√©partition par mode de paiement**")
            paiement_counts = df_filtre['Mode_Paiement'].value_counts()
            fig4 = px.pie(
                values=paiement_counts.values,
                names=paiement_counts.index,
                title="Modes de paiement"
            )
            st.plotly_chart(fig4, use_container_width=True)
        
        # Graphique temporel
        if 'Date_Achat' in df_filtre.columns:
            st.write("**√âvolution des achats dans le temps**")
            df_filtre['Date_Achat'] = pd.to_datetime(df_filtre['Date_Achat'])
            achats_par_date = df_filtre.groupby(df_filtre['Date_Achat'].dt.date).size().reset_index()
            achats_par_date.columns = ['Date', 'Nombre_Achats']
            
            fig5 = px.line(
                achats_par_date,
                x='Date',
                y='Nombre_Achats',
                title="√âvolution temporelle des achats",
                markers=True
            )
            st.plotly_chart(fig5, use_container_width=True)
    
    # Section d'export
    st.markdown("---")
    st.subheader("üíæ Export des Donn√©es")
    
    if st.button("üì• T√©l√©charger les donn√©es (CSV)", type="primary"):
        csv = df_filtre.to_csv(index=False)
        st.download_button(
            label="Cliquez ici pour t√©l√©charger",
            data=csv,
            file_name=f"achats_vehicules_{pd.Timestamp.now().strftime('%Y%m%d_%H%M%S')}.csv",
            mime="text/csv"
        )

if __name__ == "__main__":
    main()
```

### Cellule 8 : Lancement de la Visualisation

```python
# Arr√™ter les processus pr√©c√©dents
!pkill -f streamlit
time.sleep(3)

# Fonction pour lancer la visualisation
def run_streamlit_viz():
    subprocess.run(["streamlit", "run", "app_data_visualization.py", "--server.port", "8503", "--server.headless", "true"])

# Lancer l'application
thread = threading.Thread(target=run_streamlit_viz)
thread.daemon = True
thread.start()

# Attendre que le serveur d√©marre
time.sleep(10)

# Cr√©er le tunnel public
public_url = ngrok.connect(8503)
print(f"üìä Application Visualisation accessible √† : {public_url}")
```

## üéØ Application Compl√®te Multi-Pages

### Cellule 9 : Application Int√©gr√©e (Optionnel)

```python
%%writefile app_complete.py
import streamlit as st
import pandas as pd
import plotly.express as px
from datetime import datetime
import random

# Configuration de la page
st.set_page_config(
    page_title="Gestion de V√©hicules",
    page_icon="üöó",
    layout="wide",
    initial_sidebar_state="expanded"
)

def init_data():
    """Initialise les donn√©es de base."""
    if "vehicle_data" not in st.session_state:
        st.session_state["vehicle_data"] = pd.DataFrame(columns=[
            "Nom", "Contact", "Type", "Prix", "Mode_Paiement", "Date_Achat"
        ])
    
    if "messages" not in st.session_state:
        st.session_state["messages"] = [
            {
                "role": "assistant",
                "content": "üëã Bonjour ! Je suis votre assistant virtuel. Comment puis-je vous aider ?",
                "timestamp": datetime.now()
            }
        ]

def page_formulaire():
    """Page du formulaire d'achat."""
    st.title("üöó Formulaire d'Achat de V√©hicule")
    
    with st.form(key="vehicle_form", clear_on_submit=True):
        col1, col2 = st.columns(2)
        
        with col1:
            nom = st.text_input("Nom complet *")
            contact = st.text_input("Contact *")
            
        with col2:
            type_vehicule = st.selectbox("Type de v√©hicule *", ["Voiture", "Moto", "Camion", "SUV"])
            prix = st.number_input("Prix (‚Ç¨) *", min_value=0.0, step=100.0)
        
        mode_paiement = st.selectbox("Mode de paiement *", ["Comptant", "Cr√©dit", "Leasing"])
        date_achat = st.date_input("Date d'achat *", value=datetime.now().date())
        
        if st.form_submit_button("üíæ Enregistrer", type="primary"):
            if nom and contact and prix > 0:
                nouvelle_ligne = pd.DataFrame({
                    "Nom": [nom], "Contact": [contact], "Type": [type_vehicule],
                    "Prix": [prix], "Mode_Paiement": [mode_paiement], "Date_Achat": [date_achat]
                })
                st.session_state["vehicle_data"] = pd.concat([
                    st.session_state["vehicle_data"], nouvelle_ligne
                ], ignore_index=True)
                st.success("‚úÖ Achat enregistr√© !")
            else:
                st.error("‚ö†Ô∏è Veuillez remplir tous les champs obligatoires")
    
    # Affichage des donn√©es
    if not st.session_state["vehicle_data"].empty:
        st.subheader("üìä Historique")
        st.dataframe(st.session_state["vehicle_data"], use_container_width=True, hide_index=True)

def page_chatbot():
    """Page du chatbot."""
    st.title("ü§ñ Assistant Virtuel")
    
    # Affichage des messages
    for message in st.session_state["messages"]:
        with st.chat_message(message["role"]):
            st.write(message["content"])
    
    # Interface de chat
    if prompt := st.chat_input("üí¨ Votre message..."):
        # Message utilisateur
        st.session_state["messages"].append({
            "role": "user", "content": prompt, "timestamp": datetime.now()
        })
        
        with st.chat_message("user"):
            st.write(prompt)
        
        # R√©ponse du bot
        responses = [
            "C'est int√©ressant ! Pouvez-vous me donner plus de d√©tails ?",
            "Je comprends votre question. Comment puis-je vous aider davantage ?",
            "Merci pour votre message ! Que souhaitez-vous savoir d'autre ?"
        ]
        bot_response = random.choice(responses)
        
        st.session_state["messages"].append({
            "role": "assistant", "content": bot_response, "timestamp": datetime.now()
        })
        
        with st.chat_message("assistant"):
            st.write(bot_response)

def page_visualisation():
    """Page de visualisation."""
    st.title("üìä Visualisation des Donn√©es")
    
    df = st.session_state["vehicle_data"]
    
    if df.empty:
        st.info("üîç Aucune donn√©e √† afficher. Utilisez le formulaire pour ajouter des donn√©es.")
        return
    
    # M√©triques
    col1, col2, col3, col4 = st.columns(4)
    with col1:
        st.metric("Total achats", len(df))
    with col2:
        st.metric("Prix moyen", f"{df['Prix'].mean():.0f} ‚Ç¨")
    with col3:
        st.metric("Prix total", f"{df['Prix'].sum():.0f} ‚Ç¨")
    with col4:
        st.metric("Types uniques", df['Type'].nunique())
    
    # Graphiques
    col1, col2 = st.columns(2)
    
    with col1:
        st.subheader("R√©partition par type")
        type_counts = df['Type'].value_counts()
        fig1 = px.pie(values=type_counts.values, names=type_counts.index)
        st.plotly_chart(fig1, use_container_width=True)
    
    with col2:
        st.subheader("Prix par type")
        fig2 = px.bar(df, x='Type', y='Prix', title="Prix par type de v√©hicule")
        st.plotly_chart(fig2, use_container_width=True)
    
    # Tableau d√©taill√©
    st.subheader("üìã Donn√©es D√©taill√©es")
    st.dataframe(df, use_container_width=True, hide_index=True)

def main():
    """Fonction principale avec navigation."""
    init_data()
    
    # Sidebar pour la navigation
    st.sidebar.title("üöó Navigation")
    page = st.sidebar.selectbox(
        "Choisir une page",
        ["üìù Formulaire", "ü§ñ Chatbot", "üìä Visualisation"]
    )
    
    # Affichage de la page s√©lectionn√©e
    if page == "üìù Formulaire":
        page_formulaire()
    elif page == "ü§ñ Chatbot":
        page_chatbot()
    elif page == "üìä Visualisation":
        page_visualisation()
    
    # Informations dans la sidebar
    st.sidebar.markdown("---")
    st.sidebar.info(f"üìä Donn√©es enregistr√©es : {len(st.session_state['vehicle_data'])}")
    st.sidebar.info(f"üí¨ Messages √©chang√©s : {len(st.session_state['messages'])}")

if __name__ == "__main__":
    main()
```

### Cellule 10 : Lancement de l'Application Compl√®te

```python
# Arr√™ter tous les processus
!pkill -f streamlit
time.sleep(3)

# Fonction pour lancer l'application compl√®te
def run_complete_app():
    subprocess.run(["streamlit", "run", "app_complete.py", "--server.port", "8504", "--server.headless", "true"])

# Lancer l'application
thread = threading.Thread(target=run_complete_app)
thread.daemon = True
thread.start()

# Attendre que le serveur d√©marre
time.sleep(10)

# Cr√©er le tunnel public
public_url = ngrok.connect(8504)
print(f"üéØ Application Compl√®te accessible √† : {public_url}")
print(f"üöÄ Utilisez cette URL pour acc√©der √† toutes les fonctionnalit√©s !")
```

## üõ†Ô∏è Gestion des Applications

### Cellule 11 : Utilitaires de Gestion

```python
# Fonction pour arr√™ter toutes les applications
def stop_all_apps():
    !pkill -f streamlit
    print("üõë Toutes les applications Streamlit ont √©t√© arr√™t√©es")

# Fonction pour voir les processus actifs
def show_active_processes():
    !ps aux | grep streamlit

# Fonction pour nettoyer les tunnels ngrok
def clean_ngrok():
    ngrok.kill()
    print("üßπ Tous les tunnels ngrok ont √©t√© ferm√©s")

# Utilisation :
# stop_all_apps()
# show_active_processes()
# clean_ngrok()

print("üéõÔ∏è Fonctions de gestion disponibles :")
print("- stop_all_apps() : Arr√™te toutes les applications")
print("- show_active_processes() : Affiche les processus actifs")
print("- clean_ngrok() : Ferme tous les tunnels ngrok")
```

## üìã Instructions d'Utilisation

### √âtapes √† Suivre dans Google Colab

1. **Ex√©cuter les cellules 1-2** : Installation et configuration
2. **Choisir une application** :
   - Cellules 3-4 : Formulaire de v√©hicule
   - Cellules 5-6 : Chatbot
   - Cellules 7-8 : Visualisation
   - Cellules 9-10 : Application compl√®te (recommand√©)
3. **Acc√©der √† l'application** via l'URL ngrok fournie
4. **Utiliser la cellule 11** pour g√©rer les applications

### Conseils Important

- ‚ö†Ô∏è **Token ngrok** : Obtenez un token gratuit sur [ngrok.com](https://ngrok.com/)
- üîÑ **Red√©marrage** : Si une application plante, utilisez `stop_all_apps()` puis relancez
- üíæ **Donn√©es** : Les donn√©es sont perdues si vous fermez Colab
- üåê **URLs** : Les URLs ngrok changent √† chaque red√©marrage

### D√©pannage

```python
# Si les applications ne d√©marrent pas :
!pip install --upgrade streamlit

# Pour voir les logs d'erreur :
!tail -f /root/.streamlit/logs/streamlit.log

# Pour lib√©rer les ports :
!lsof -ti:8501,8502,8503,8504 | xargs kill -9
```

## üéâ Conclusion

Ce tutoriel vous permet de cr√©er et ex√©cuter des applications Streamlit directement dans Google Colab. L'application compl√®te (cellules 9-10) est recommand√©e car elle combine toutes les fonctionnalit√©s en une seule interface avec navigation par onglets.

Les applications sont maintenant **enti√®rement fonctionnelles dans Google Colab** ! üöÄ